<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="style.css" rel="stylesheet">
    <title>Frontend</title>
</head>

<body>

    <div id="content"> </div>

    <script>
        const url1 = 'http://localhost:3000/api/teddies';
        const url2 = 'http://localhost:3000/api/furniture';
        const url3 = 'http://localhost:3000/api/cameras';

        // Exécute un appel AJAX GET
        // Prend en paramètres l'URL cible et la fonction callback appelée en cas de succès
        function ajaxGet(url, callback) {
            var req = new XMLHttpRequest();
            req.open("GET", url);
            req.addEventListener("load", function() {
                if (req.status >= 200 && req.status < 400) {
                    // Appelle la fonction callback en lui passant la réponse de la requête
                    callback(req.responseText);
                } else {
                    console.error(req.status + " " + req.statusText + " " + url);
                }
            });
            req.addEventListener("error", function() {
                console.error("Erreur réseau avec l'URL " + url);
            });
            req.send(null);
        }

        ajaxGet(url1, function(reponse) {
            // Transforme la réponse en tableau d'objets JavaScript
            var elements = JSON.parse(reponse);
            // Affiche le titre de chaque film
            elements.forEach(function(element) {
                console.log(element);
                let img = document.createElement('img');
                let p = document.createElement('p');


                img.src = element.imageUrl;
                img.width = "400";
                p.textContent = element.name
                document.getElementById('content').appendChild(img);
                document.getElementById('content').appendChild(p);


            })
        });




        /* fetch(url1)
             .then(Response => Response.json())
             .then(result => {
                 console.log(result);
                 result.forEach(element => {
                     let img = document.createElement('img');
                     img.src = element.imageUrl;
                     img.width = '400';
                     document.getElementById('content').appendChild(img);

                 });



             });
         fetch(url2)
             .then(Response => Response.json())
             .then(result => {
                 console.log(result);
                 result.forEach(element => {
                     let img = document.createElement('img');
                     img.src = element.imageUrl;
                     img.width = '400';
                     document.getElementById('content').appendChild(img);

                 });



             });
         fetch(url3)
             .then(Response => Response.json())
             .then(result => {
                 console.log(result);
                 result.forEach(element => {
                     let img = document.createElement('img');
                     img.src = element.imageUrl;
                     img.width = '400';
                     document.getElementById('content').appendChild(img);

                 });



             });*/
    </script>


</body>

</html>